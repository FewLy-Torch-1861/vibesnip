{% for snippet in snippets %}
<div class="snippet-card p-4 rounded relative group fade-in" id="snippet-{{ snippet.id }}">
    <div class="flex justify-between items-start mb-2">
        <h3 class="font-bold text-accent text-lg">{{ snippet.title }}</h3>
        <span class="text-xs bg-border px-2 py-1 rounded text-text font-mono">{{ snippet.language }}</span>
    </div>
    
    <div class="relative group/code">
        <pre class="bg-[#1e1e2e] !bg-opacity-100 rounded overflow-hidden text-sm border border-border mb-3 font-mono p-0"><code class="language-{{ snippet.language }} p-4 block">{{ snippet.code }}</code></pre>
        <button onclick="copyToClipboard(this)" 
                class="absolute top-2 right-2 opacity-0 group-hover/code:opacity-100 bg-accent text-bg px-2 py-1 text-xs rounded font-bold transition-opacity z-10">
            COPY
        </button>
    </div>

    <div class="flex justify-between items-center text-xs text-gray-400 mt-2">
        <div class="flex gap-2">
            {% for tag in snippet.tags.split(',') %}
                {% if tag.strip() %}
                <span class="before:content-['#'] hover:text-white cursor-pointer">{{ tag.strip() }}</span>
                {% endif %}
            {% endfor %}
        </div>
        <div class="flex gap-3">
            <button onclick="loadSnippet({{ snippet.id }})" 
                    class="text-accent hover:text-white hover:underline">
                [edit]
            </button>
            <button hx-delete="/delete/{{ snippet.id }}" 
                    hx-target="#snippet-{{ snippet.id }}" 
                    hx-swap="outerHTML"
                    class="text-red-400 hover:text-red-300 hover:underline">
                [rm]
            </button>
        </div>
    </div>
</div>
{% else %}
<div class="col-span-full text-center py-12 text-gray-500 border border-dashed border-border rounded">
    <p>No snippets found. <br> Run `add_snippet` to get started.</p>
</div>
{% endfor %}
